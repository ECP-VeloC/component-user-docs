<!-- HTML header for doxygen 1.8.15-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=9"/>
    <meta name="generator" content="Doxygen 1.8.17"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>ECP-VELOC Components: Encode/Rebuild (ER)</title>
    <!-- <link href="tabs.css" rel="stylesheet" type="text/css"/> -->
    <!-- <script type="text/javascript" src="jquery.js"></script> -->
    <!-- <script type="text/javascript" src="dynsections.js"></script> -->
    <!--  -->
    <!--  -->
    <!--  -->
    <link href="doxygen.css" rel="stylesheet" type="text/css" />
    <link href="new_stylesheet.css" rel="stylesheet" type="text/css"/>
  </head>
  <body>
    <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
      <div id="titlearea">
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr style="height: 56px;">
              <td id="projectalign" style="padding-left: 0.5em;">
                <div id="projectname">ECP-VELOC Components
                </div>
                <div id="projectbrief">User documentation for all components</div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <!-- end header part -->
      <div id="main-nav">
        <ul id="main-menu" class="sm sm-dox">
          <li><a href="index.html"><span>Main Page</span></a></li>
          <li><a href="modules.html"><span>Components</span></a></li>
          <li><a href="files.html"><span>All Files</span></a></li>
        </ul>
      </div>
<!-- Generated by Doxygen 1.8.17 -->
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Encode/Rebuild (ER) </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a href="https://travis-ci.org/ECP-VeloC/er"><img src="https://api.travis-ci.org/ECP-VeloC/er.png?branch=master" alt="Build Status" class="inline"/></a></p>
<h1><a class="anchor" id="autotoc_md28"></a>
Overview</h1>
<p>This module combines the funcitonality of shuffile and redset, which lets both migrate and rebuild files within an MPI job. It is useful for moving and rebuilding data files on distributed storage, e.g., node-local storage, particularly when MPI ranks may be running on different compute nodes than when they originally created their files.</p>
<p>To encode, one defines a redundancy scheme and then applies the redundancy scheme to a list of files also providing a name for the encoded set. To rebuild, one specifies the name of the encoded set. Additionally, there is a function to remove the encoding information, which is needed when removing a dataset.</p>
<p>Currently, er assumes the group of processes participating is the same as MPI_COMM_WORLD.</p>
<p>Usage is documented in <a href="src/er.h">src/er.h</a> and in the <a href="https://ecp-veloc.github.io/component-user-docs/group__er.html">user API</a> docs.</p>
<h1><a class="anchor" id="autotoc_md29"></a>
Building</h1>
<p>To build dependencies: </p><pre class="fragment">git clone git@github.com:ECP-VeloC/KVTree.git   KVTree.git
git clone git@github.com:ECP-VeloC/rankstr.git  rankstr.git
git clone git@github.com:ECP-VeloC/redset.git   redset.git
git clone git@github.com:ECP-VeloC/shuffile.git shuffile.git

mkdir install

rm -rf build
mkdir build
cd build
cmake -DCMAKE_BUILD_TYPE=Debug -DCMAKE_INSTALL_PREFIX=../install -DMPI=ON ../KVTree.git
make clean
make
make install
cd ..

rm -rf build
mkdir build
cd build
cmake -DCMAKE_BUILD_TYPE=Debug -DCMAKE_INSTALL_PREFIX=../install -DMPI=ON ../rankstr.git
make clean
make
make install
cd ..

rm -rf build
mkdir build
cd build
cmake -DCMAKE_BUILD_TYPE=Debug -DCMAKE_INSTALL_PREFIX=../install -DMPI=ON ../redset.git
make clean
make
make install
cd ..

rm -rf build
mkdir build
cd build
cmake -DCMAKE_BUILD_TYPE=Debug -DCMAKE_INSTALL_PREFIX=../install -DMPI=ON ../shuffile.git
make clean
make
make install
cd ..
</pre><p>To build ER: </p><pre class="fragment">cmake -DCMAKE_BUILD_TYPE=Debug -DCMAKE_INSTALL_PREFIX=./install -DWITH_KVTREE_PREFIX=`pwd`/install -DWITH_RANKSTR_PREFIX=`pwd`/install -DWITH_REDSET_PREFIX=`pwd`/install -DWITH_SHUFFILE_PREFIX=`pwd`/install .
make
</pre><h1><a class="anchor" id="autotoc_md30"></a>
Testing</h1>
<p>Some simple test programs exist in the test directory.</p>
<p>To build a test for the ER API: </p><pre class="fragment">mpicc -g -O0 -o test_er test_er.c -I../install/include -L../install/lib64 -lkvtree -lshuffile -lredset -lrankstr -I../src -L../src -ler
</pre><h2><a class="anchor" id="autotoc_md31"></a>
Release</h2>
<p>Copyright (c) 2018, Lawrence Livermore National Security, LLC. Produced at the Lawrence Livermore National Laboratory. <br  />
 Copyright (c) 2018, UChicago Argonne LLC, operator of Argonne National Laboratory.</p>
<p>For release details and restrictions, please read the [LICENSE]() and [NOTICE]() files.</p>
<p><code>LLNL-CODE-751725</code> <code>OCEC-18-060</code> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- HTML footer for doxygen 1.8.15-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
