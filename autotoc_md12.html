<!-- HTML header for doxygen 1.8.15-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=9"/>
    <meta name="generator" content="Doxygen 1.8.15"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>ECP-VELOC Components: Component Developer Documentation</title>
    <!-- <link href="tabs.css" rel="stylesheet" type="text/css"/> -->
    <!-- <script type="text/javascript" src="jquery.js"></script> -->
    <!-- <script type="text/javascript" src="dynsections.js"></script> -->
    <!--  -->
    <!--  -->
    <!--  -->
    <link href="doxygen.css" rel="stylesheet" type="text/css" />
    <link href="new_stylesheet.css" rel="stylesheet" type="text/css"/>
  </head>
  <body>
    <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
      <div id="titlearea">
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr style="height: 56px;">
              <td id="projectalign" style="padding-left: 0.5em;">
                <div id="projectname">ECP-VELOC Components
                </div>
                <div id="projectbrief">User documentation for all components</div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <!-- end header part -->
      <div id="main-nav">
        <ul id="main-menu" class="sm sm-dox">
          <li><a href="index.html"><span>Main Page</span></a></li>
          <li><a href="modules.html"><span>Components</span></a></li>
          <li><a href="files.html"><span>All Files</span></a></li>
        </ul>
      </div>
<!-- Generated by Doxygen 1.8.15 -->
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Component Developer Documentation </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This repository is for developer documentation related to various VELOC / SCR components. It also contains <a class="el" href="_p_o_l_i_c_i_e_s_8md.html">documentation on policies</a> that apply to all of the repositories.</p>
<p>All open issues for the components can be viewed on the <a href="https://github.com/orgs/ECP-VeloC/projects/1">Components Project Board</a>.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Repo  </th><th class="markdownTableHeadNone">Version  </th><th class="markdownTableHeadNone">Docs?  </th><th class="markdownTableHeadNone">Testing?  </th><th class="markdownTableHeadNone">Travis CI   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a href="https://github.com/ecp-veloc/kvtree">KVTree</a>  </td><td class="markdownTableBodyNone">?  </td><td class="markdownTableBodyNone">?  </td><td class="markdownTableBodyNone">:heavy_check_mark:  </td><td class="markdownTableBodyNone"><a href="https://travis-ci.org/ECP-VeloC/KVTree"><img src="https://api.travis-ci.org/ECP-VeloC/KVTree.png?branch=master" alt="Build Status" class="inline"/>
</a>   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a href="https://github.com/ecp-veloc/axl">AXL</a>  </td><td class="markdownTableBodyNone">?  </td><td class="markdownTableBodyNone">?  </td><td class="markdownTableBodyNone">:heavy_check_mark:  </td><td class="markdownTableBodyNone"><a href="https://travis-ci.org/ECP-VeloC/AXL"><img src="https://api.travis-ci.org/ECP-VeloC/AXL.png?branch=master" alt="Build Status" class="inline"/>
</a>   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a href="https://github.com/ecp-veloc/spath">spath</a>  </td><td class="markdownTableBodyNone">?  </td><td class="markdownTableBodyNone">?  </td><td class="markdownTableBodyNone">:heavy_check_mark:  </td><td class="markdownTableBodyNone"><a href="https://travis-ci.org/ECP-VeloC/spath"><img src="https://api.travis-ci.org/ECP-VeloC/spath.png?branch=master" alt="Build Status" class="inline"/>
</a>   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a href="https://github.com/ecp-veloc/filo">filo</a>  </td><td class="markdownTableBodyNone">?  </td><td class="markdownTableBodyNone">?  </td><td class="markdownTableBodyNone">:heavy_check_mark:  </td><td class="markdownTableBodyNone"><a href="https://travis-ci.org/ECP-VeloC/filo"><img src="https://api.travis-ci.org/ECP-VeloC/filo.png?branch=master" alt="Build Status" class="inline"/>
</a>   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a href="https://github.com/ecp-veloc/shuffile">shuffile</a>  </td><td class="markdownTableBodyNone">?  </td><td class="markdownTableBodyNone">?  </td><td class="markdownTableBodyNone">:heavy_check_mark:  </td><td class="markdownTableBodyNone"><a href="https://travis-ci.org/ECP-VeloC/shuffile"><img src="https://api.travis-ci.org/ECP-VeloC/shuffile.png?branch=master" alt="Build Status" class="inline"/>
</a>   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a href="https://github.com/ecp-veloc/redset">redset</a>  </td><td class="markdownTableBodyNone">?  </td><td class="markdownTableBodyNone">?  </td><td class="markdownTableBodyNone">?  </td><td class="markdownTableBodyNone"><a href="https://travis-ci.org/ECP-VeloC/redset"><img src="https://api.travis-ci.org/ECP-VeloC/redset.png?branch=master" alt="Build Status" class="inline"/>
</a>   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a href="https://github.com/ecp-veloc/er">er</a>  </td><td class="markdownTableBodyNone">?  </td><td class="markdownTableBodyNone">?  </td><td class="markdownTableBodyNone">?  </td><td class="markdownTableBodyNone"><a href="https://travis-ci.org/ECP-VeloC/er"><img src="https://api.travis-ci.org/ECP-VeloC/er.png?branch=master" alt="Build Status" class="inline"/>
</a>   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a href="https://github.com/ecp-veloc/rankstr">rankstr</a>  </td><td class="markdownTableBodyNone">?  </td><td class="markdownTableBodyNone">?  </td><td class="markdownTableBodyNone">?  </td><td class="markdownTableBodyNone"><a href="https://travis-ci.org/ECP-VeloC/rankstr"><img src="https://api.travis-ci.org/ECP-VeloC/rankstr.png?branch=master" alt="Build Status" class="inline"/>
</a>   </td></tr>
</table>
<img src="./diagram/components.png" alt="Components Diagram" class="inline"/>
<h1><a class="anchor" id="autotoc_md15"></a>
Component Descriptions</h1>
<h2><a class="anchor" id="autotoc_md16"></a>
Basic Data Structures and Algorithms</h2>
<h3><a class="anchor" id="autotoc_md17"></a>
&lt;a href="https://github.com/ecp-veloc/kvtree"&gt;KVTree&lt;/a&gt;: Recursive key-value structure</h3>
<p>Documentation:</p><ul>
<li><a href="https://github.com/ecp-veloc/kvtree/blob/master/doc/rst/users/overview.rst">Overview</a></li>
<li><a href="https://github.com/ecp-veloc/kvtree/blob/master/doc/rst/users/api.rst">API</a></li>
<li><a href="https://github.com/ecp-veloc/kvtree/blob/master/doc/rst/users/gatherscatter.rst">Gather/Scatter</a></li>
<li><a href="https://github.com/ecp-veloc/kvtree/blob/master/doc/rst/users/fileformat.rst">File Format</a></li>
<li><a href="https://github.com/ecp-veloc/kvtree/blob/master/doc/rst/users/debugging.rst">Debugging</a></li>
<li><a href="https://scr-dev.readthedocs.io/en/latest/developers/hash.html">Related SCR dev doc</a></li>
</ul>
<p>Each KVTree object contains a list of key/value pairs. Each key is a string, each value is another kvtree object. This is a nested data structures, similar to a python dict or perl hash. The library provides functions to serialize a kvtree object to / from a file. It also optionally provides MPI send / recv functions to transfer an object from one process to another.</p>
<h3><a class="anchor" id="autotoc_md18"></a>
&lt;a href="https://github.com/ecp-veloc/spath"&gt;spath&lt;/a&gt;: represent and manipulate file system paths</h3>
<p>Documentation:</p><ul>
<li><a href="https://github.com/ecp-veloc/spath/blob/master/doc/rst/spath.rst">Overview</a></li>
<li><a href="https://scr-dev.readthedocs.io/en/latest/developers/path.html">Related SCR dev doc</a></li>
</ul>
<p>Create an spath object from a string. The library includes functions to extract components (such as dirname, basename). It can create an absolute path or compute a relative path from a source path to a destination path. It can also simplify a path (i.e., convert <code>../foo//bar</code> to <code>foo/bar</code>).</p>
<h3><a class="anchor" id="autotoc_md19"></a>
&lt;a href="https://github.com/ecp-veloc/rankstr"&gt;rankstr&lt;/a&gt;: splits processes into groups based on a set of process which have the same input string</h3>
<p>Rankstr uses bitonic sort for a scalable method to identify process groups. It is useful to create a communicator of ranks that all share the same storage device, then rank 0 in this communicator can create directory and inform others that dir has been created with barrier. It is also used to split processes into groups based on failure group (failure group of NODE --&gt; splits MPI_COMM_WORLD into subgroups based on hostname).</p>
<h2><a class="anchor" id="autotoc_md20"></a>
File transfers between cache and parallel file system</h2>
<h3><a class="anchor" id="autotoc_md21"></a>
&lt;a href="https://github.com/ecp-veloc/axl"&gt;AXL&lt;/a&gt;: Asynchronous transfer library</h3>
<p>Documentation:</p><ul>
<li>Overview</li>
<li>Internal Data Structure</li>
<li><a href="https://scr-dev.readthedocs.io/en/latest/developers/file_transfer.html">Related SCR dev doc</a></li>
</ul>
<p>AXL is used to transfer a file from one path to another using synchronous and asynchronous methods. This can only be done between storage tiers, AXL does not (yet) support movement within a storage tier (such as between 2 compute nodes). Asynchronous methods include via pthreads, IBM BB API, Cray Datawarp. AXL will create directories for destination files.</p>
<h3><a class="anchor" id="autotoc_md22"></a>
&lt;a href="https://github.com/ecp-veloc/filo"&gt;FILO&lt;/a&gt;: File flush and fetch, coordinating file transfers with MPI</h3>
<p>Documentation:</p><ul>
<li><a href="https://scr-dev.readthedocs.io/en/latest/developers/flow_flush.html">SCR dev docs: flush</a></li>
<li><a href="https://scr-dev.readthedocs.io/en/latest/developers/file_rank2file.html">SCR dev docs: rank2file</a></li>
</ul>
<p>Each process in a communicator registers a list of source and destination paths. FILO then computes the union of destination directories and creates them in advance, using minimal mkdir() calls. It executes AXL transfers, optionally using a sliding window for flow control. It will record ownership map of which rank flushed which file (in the rank2file file). This is used to fetch those files back to owner ranks during a restart.</p>
<h2><a class="anchor" id="autotoc_md23"></a>
Redundancy Encoding/Decoding and File Migration</h2>
<h3><a class="anchor" id="autotoc_md24"></a>
&lt;a href="https://github.com/ecp-veloc/redset"&gt;Redset&lt;/a&gt;: Encode/decode a set of files with a redundancy method</h3>
<p>Documentation:</p><ul>
<li><a href="https://scr-dev.readthedocs.io/en/latest/developers/redundancy_descriptors.html">SCR dev docs: redundancy descriptors</a></li>
<li><a href="https://scr-dev.readthedocs.io/en/latest/developers/schemes.html">SCR dev docs: Encoding schemes</a></li>
<li><a href="https://scr-dev.readthedocs.io/en/latest/developers/scheme_xor.html">SCR dev docs: XOR scheme</a></li>
</ul>
<p>Redset will create the redundancy data needed for a set of files. It can rebuild a file with provided redundancy information.</p>
<h3><a class="anchor" id="autotoc_md25"></a>
&lt;a href="https://github.com/ecp-veloc/shuffile"&gt;Shuffile&lt;/a&gt;: Shuffle files between MPI ranks</h3>
<p>Documentation:</p><ul>
<li><a href="https://scr-dev.readthedocs.io/en/latest/developers/flow_api.html#scr-scatter-filemaps">SCR dev docs: Scatter filemaps</a></li>
</ul>
<p>Files are registered with Used during restart, shuffile will move a file to the 'owning' MPI rank.</p>
<h3><a class="anchor" id="autotoc_md26"></a>
&lt;a href="https://github.com/ecp-veloc/er"&gt;ER&lt;/a&gt;: Encode + Rebuild</h3>
<p>ER is the abstraction of shuffile and redset into a single interface, SCR and VeloC use both and er to simplify the rebuilding steps. On a restart, shuffile is used to first move files back to owning ranks, depending on new rank-to-node mapping. Then redset is used to rebuild missing files after the shuffle. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.15-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
